(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0def5728"],{1868:function(t,e,s){"use strict";var a=s("35d9"),i=s.n(a);i.a},"35d9":function(t,e,s){},"7c58":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"components-container"},[t._m(0),t._v(" "),s("el-row",[s("el-col",{attrs:{sm:24,md:24,lg:14}},[s("el-card",{staticClass:"box-card"},[s("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[s("strong",[s("i",{staticClass:"el-icon-full-screen"}),t._v(" "),s("span",[t._v("Scan Assy Barcode")])])]),t._v(" "),s("div",{staticStyle:{"margin-bottom":"15px"}},[s("el-row",[s("el-col",{staticClass:"text-center",attrs:{xs:24,sm:24,md:6}},[s("Btn",{attrs:{name:"reset",icon:"el-icon-setting"},on:{click:t.resetInfo}})],1),t._v(" "),s("el-col",{attrs:{xs:24,sm:24,md:18}},[s("el-input",{ref:"config",staticClass:"toupper",attrs:{size:"large",placeholder:"Please input Config Label",clearable:"",autofocus:""},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.checkAssyInfo(e)}},model:{value:t.inputConfig,callback:function(e){t.inputConfig=e},expression:"inputConfig"}})],1)],1)],1),t._v(" "),s("div",{staticStyle:{"margin-bottom":"50px"}},[s("resultbox",{attrs:{data:t.data,placeholder:"Scan Result"},model:{value:t.out_message,callback:function(e){t.out_message=e},expression:"out_message"}}),t._v(" "),s("el-table",{ref:"tableData",staticStyle:{width:"100%"},attrs:{data:t.tableData,border:"","highlight-current-row":"","row-class-name":t.tableRowClassName},on:{select:t.handleSelection,"selection-change":t.handleSelectionChange}},[s("el-table-column",{attrs:{type:"selection",align:"center",width:"80"}}),t._v(" "),s("el-table-column",{attrs:{prop:"operation_desc",label:"Operation Name",width:"180"}}),t._v(" "),s("el-table-column",{attrs:{label:"Result"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return s("div",{},[[s("el-input",{ref:"result"+a.index,staticClass:"toupper",attrs:{readonly:a.isReadonly},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.createInspection(e)}},model:{value:a.result,callback:function(e){t.$set(a,"result",e)},expression:"row.result"}})]],2)}}])})],1)],1)])],1),t._v(" "),s("el-col",{attrs:{sm:24,md:24,lg:10}},[s("el-form",{staticClass:"form-container",attrs:{"label-width":"30%"}},[s("el-form-item",{attrs:{label:"Item Number"}},[s("el-input",{staticClass:"resultbox",staticStyle:{width:"80%"},attrs:{placeholder:"Item Number",readonly:""},model:{value:t.itemNumber,callback:function(e){t.itemNumber=e},expression:"itemNumber"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"Serial Number"}},[s("el-input",{staticClass:"resultbox",staticStyle:{width:"80%"},attrs:{placeholder:"Serial Number",readonly:""},model:{value:t.serialNumber,callback:function(e){t.serialNumber=e},expression:"serialNumber"}})],1)],1)],1),t._v(" "),s("el-col",{attrs:{sm:24,md:24,lg:24}},[s("el-card",{staticClass:"box-card"},[s("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[s("strong",[s("span",[s("i",{staticClass:"el-icon-reading"}),t._v(" 금일 내가 작업한 공정내 검사 이력 ")])])]),t._v(" "),s("historytable",{attrs:{data:t.historyData,cols:t.cols,listLoading:t.listLoading}}),t._v(" "),s("pagination",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total > 0"}],attrs:{total:t.total,page:t.historyQuery.page,limit:t.historyQuery.limit},on:{"update:page":function(e){return t.$set(t.historyQuery,"page",e)},"update:limit":function(e){return t.$set(t.historyQuery,"limit",e)},pagination:t.getOpHistories}})],1)],1)],1)],1)},i=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("aside",[s("strong",[t._v("Inline Inspection")]),t._v(" 공정 내 검사")])}],n=(s("96cf"),s("1da1")),r=s("5530"),l=s("c356"),o=s("c1df"),u=s.n(o),c=s("83d6"),h=s.n(c),p=s("2f62"),m=s("d9b2"),d=s("333d"),b=s("e12e"),f=s("14e0"),g=h.a.op_inspection,_=[{prop:"id",label:"ID",width:null},{prop:"line_name",label:"Line",width:null},{prop:"interfaced_wo_num",label:"W/O",width:null},{prop:"config_indicator",label:"Assy Barcode",width:null},{prop:"item_number",label:"Item",width:null},{prop:"serial_number",label:"Serial",width:null},{prop:"operation_desc",label:"Desc",width:null},{prop:"timestamp_str",label:"Timestamp",width:null},{prop:"passfail",label:"Passfail",width:null}],w={components:{Historytable:m["a"],Pagination:d["a"],Resultbox:b["a"],Btn:f["a"]},data:function(){return{inputConfig:"",itemNumber:"",serialNumber:"",consecutiveFlag:!1,out_message:"Scan Assy Barcode",currentRow:0,tableData:[],historyData:[],resultDefault:!0,resultSuccess:!1,resultError:!1,data:null,cols:_,total:0,listLoading:!1,historyQuery:{userid:null,optype:g,date_flag:"Today",page:1,limit:10,sort:0}}},computed:Object(r["a"])({},Object(p["b"])(["token","mfgid","lang"])),mounted:function(){this.getOpHistories()},methods:{resetInfo:function(){this.inputConfig="",this.itemNumber="",this.serialNumber="",this.out_message="",this.currentRow=0,this.tableData=[],this.historyData=[],this.consecutiveFlag=!1},moment:function(t){return u()(t).format("YYYY-MM-DD")},createInspection:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e,s,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this.moment(new Date),s={p_item_number:this.itemNumber,p_lang:this.lang,p_serial_number:this.serialNumber,p_passfail:this.fieldUpperCase(this.tableData[this.currentRow-1].result),p_operation_id:this.tableData[this.currentRow-1].operation_id,p_user_id:this.token,p_txn_date:e,p_op_chk_flag:"Y"},t.next=4,Object(l["e"])(s);case 4:a=t.sent,this.data=a.x_result,"OK"===a.x_result?(this.out_message="["+a.x_result+"] "+this.tableData[this.currentRow-1].result.toUpperCase(),this.tableData[this.currentRow-1].result="",this.nextInspection(),this.getOpHistories()):(this.tableData[this.currentRow-1].result="",this.out_message="["+a.x_result+"] "+a.x_message);case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getOpHistories:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.listLoading=!0,this.historyQuery.userid=this.token,t.next=4,Object(l["o"])(this.historyQuery);case 4:e=t.sent,this.historyData=e.items,this.total=e.total,this.listLoading=!1;case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),checkAssyInfo:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.inputConfig=this.fieldUpperCase(this.inputConfig),t.next=3,Object(l["b"])(this.inputConfig,this.lang);case 3:if(e=t.sent,this.itemNumber===e.x_item_number?this.consecutiveFlag=!0:this.consecutiveFlag=!1,this.itemNumber=e.x_item_number,this.serialNumber=e.x_serial_number,this.data=e.x_result,"OK"!==e.x_result){t.next=22;break}return this.out_message="["+e.x_result+"] "+this.serialNumber,t.next=12,Object(l["l"])(e.x_item_number,e.x_serial_number);case 12:s=t.sent,0==s.length&&(this.data="NG",this.out_message="[NG] There is no inspection operation for this item."),this.consecutiveFlag||(this.tableData=s),this.currentRow=0,this.nextInspection(!this.consecutiveFlag),this.getOpHistories(),t.next=23;break;case 22:this.out_message="["+e.x_result+"] "+e.x_message;case 23:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),tableRowClassName:function(t){var e=t.row,s=t.rowIndex;return e.index=s,""},handleSelection:function(t,e){this.tableData[e.index].isReadonly=!this.tableData[e.index].isReadonly},handleSelectionChange:function(t){this.multipleSelection=t},nextInspection:function(t){this.currentRow==this.tableData.length?(this.currentRow=0,this.$refs.config.focus(),this.inputConfig="",this.$refs.tableData.setCurrentRow()):(this.$refs.tableData.setCurrentRow(this.tableData[this.currentRow]),t&&this.$nextTick((function(){for(var t=0;t<this.tableData.length;t++)this.$refs.tableData.toggleRowSelection(this.tableData[t]),this.tableData[t].isReadonly=!1})),this.$nextTick((function(){!0===this.tableData[this.currentRow].isReadonly?(this.currentRow=this.currentRow+1,this.nextInspection()):(this.$refs["result"+this.currentRow].focus(),this.currentRow=this.currentRow+1)})))},fieldUpperCase:function(t){return t?t.toUpperCase().trim():null}}},x=w,v=(s("1868"),s("2877")),y=Object(v["a"])(x,a,i,!1,null,"1bed1b16",null);e["default"]=y.exports}}]);